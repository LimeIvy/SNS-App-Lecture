## 2. 座学: データを保存する仕組み

### 2.1. データベースってなんだろう？

ウェブサイトやアプリを使っていると、たくさんの情報が出てきますよね。例えば、X（旧Twitter）なら、

- ユーザーさんの名前や自己紹介（プロフィール情報）
- みんなが書いた投稿（ポスト）
- 誰が誰をフォローしているか（フォロー情報）

これらの情報は、どこかにきちんと整理されて保存されている必要があります。そうでなければ、ページを開くたびに情報が消えてしまったり、他の人が見られなかったりします。この「情報を整理して保存しておく場所」が **データベース** です。

データベースは、たくさんの情報を効率よく出し入れできるように設計された、いわば「ハイテクな整理棚」のようなものです。

（画像イメージ: `../../資料/1. DB接続/image.png` - データベースの概念図や整理棚のイラストなど）

### 2.2. Supabase: かんたんデータベース＆バックエンド

今回私たちが使うのは **Supabase (ス―パベース)** というサービスです。

- **Supabaseとは？**
  - Supabaseは、データベースだけでなく、ユーザー認証（ログイン機能など）やファイルの保存場所（ストレージ）といった、ウェブアプリの「裏側（バックエンド）」で必要になる様々な機能をまとめて簡単に使えるようにしてくれるサービスです。「Backend as a Service (BaaS)」と呼ばれる種類の一つです。
  - 特に、**PostgreSQL (ポストグレスキューエル)** という非常に人気があり高機能なオープンソースのデータベースを簡単に利用できるのが大きな特徴です。
- **Supabaseでできること（主な機能）**
  - **データベース:** 投稿内容やユーザー情報を保存・管理できます。
  - **認証 (Auth):** メールアドレスとパスワードを使ったログイン・新規登録機能を簡単に作れます。
  - **ストレージ:** プロフィール画像などのファイルを保存できます。
  - **リアルタイム機能:** 誰かが新しい投稿をしたら、ページを再読み込みしなくてもタイムラインが自動で更新される、といった機能も作れます。

（画像イメージ: `../../資料/1. DB接続/image2.png` - Supabaseのロゴや提供機能の一覧図）

Supabaseを使うことで、私たちは面倒なサーバー管理などを気にすることなく、アプリの機能開発に集中できます。

### 2.3. APIキーと環境変数: 大事な情報は隠しておこう

Next.jsアプリからSupabaseのデータベースに接続するには、「接続先の住所（URL）」と「秘密の合言葉（APIキー）」が必要です。これらは非常に大事な情報なので、誰にでも見える場所に書いてしまうのは危険です。

- **APIキーとは？**
  - Application Programming Interface Keyの略で、特定のサービス（今回はSupabase）を利用する際に、「あなたは許可された利用者ですよ」と証明するための鍵のようなものです。
- **なぜ隠すの？**
  - もしAPIキーが悪意のある人に知られてしまうと、勝手にデータベースを操作されたり、情報を盗まれたりする可能性があります。
- **環境変数 (Environment Variables) とは？**
  - そこで登場するのが「環境変数」です。これは、プログラムの外側で情報を設定しておき、プログラム実行時にその値を読み込める仕組みです。
  - Next.jsでは、プロジェクトのルートに `.env.local` という名前のファイルを作り、そこにAPIキーなどの秘密情報を記述します。この `.env.local` ファイルは、Gitの管理対象から除外する（`.gitignore` に記載する）ことで、GitHubなどに公開されるのを防ぎます。

（画像イメージ: `../../資料/1. DB接続/image5.png` - APIキーや環境変数のイメージ図、鍵と錠前のイラストなど）
